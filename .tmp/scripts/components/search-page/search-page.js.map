{"version":3,"sources":["components/search-page/search-page.js"],"names":["e","t","n","r","s","o","u","a","require","i","Error","f","exports","call","length","module","angular","component","templateUrl","controller","Controller","controllerAs","$inject","postsService","vm","movies","title","search","year","type","alert","getMovies","then","resp","data","Search","getEachMovie","list","forEach","movie","index","getFullMovie","imdbID"],"mappings":";;AAAA,CAAC,SAASA,CAAT,CAAWC,CAAX,EAAaC,CAAb,EAAeC,CAAf,EAAiB;AAAC,WAASC,CAAT,CAAWC,CAAX,EAAaC,CAAb,EAAe;AAAC,QAAG,CAACJ,EAAEG,CAAF,CAAJ,EAAS;AAAC,UAAG,CAACJ,EAAEI,CAAF,CAAJ,EAAS;AAAC,YAAIE,IAAE,OAAOC,OAAP,IAAgB,UAAhB,IAA4BA,OAAlC,CAA0C,IAAG,CAACF,CAAD,IAAIC,CAAP,EAAS,OAAOA,EAAEF,CAAF,EAAI,CAAC,CAAL,CAAP,CAAe,IAAGI,CAAH,EAAK,OAAOA,EAAEJ,CAAF,EAAI,CAAC,CAAL,CAAP,CAAe,MAAM,IAAIK,KAAJ,CAAU,yBAAuBL,CAAvB,GAAyB,GAAnC,CAAN;AAA8C,WAAIM,IAAET,EAAEG,CAAF,IAAK,EAACO,SAAQ,EAAT,EAAX,CAAwBX,EAAEI,CAAF,EAAK,CAAL,EAAQQ,IAAR,CAAaF,EAAEC,OAAf,EAAuB,UAASZ,CAAT,EAAW;AAAC,YAAIE,IAAED,EAAEI,CAAF,EAAK,CAAL,EAAQL,CAAR,CAAN,CAAiB,OAAOI,EAAEF,IAAEA,CAAF,GAAIF,CAAN,CAAP;AAAgB,OAApE,EAAqEW,CAArE,EAAuEA,EAAEC,OAAzE,EAAiFZ,CAAjF,EAAmFC,CAAnF,EAAqFC,CAArF,EAAuFC,CAAvF;AAA0F,YAAOD,EAAEG,CAAF,EAAKO,OAAZ;AAAoB,OAAIH,IAAE,OAAOD,OAAP,IAAgB,UAAhB,IAA4BA,OAAlC,CAA0C,KAAI,IAAIH,IAAE,CAAV,EAAYA,IAAEF,EAAEW,MAAhB,EAAuBT,GAAvB;AAA2BD,MAAED,EAAEE,CAAF,CAAF;AAA3B,GAAmC,OAAOD,CAAP;AAAS,CAAvZ,EAAyZ,EAAC,GAAE,CAAC,UAASI,OAAT,EAAiBO,MAAjB,EAAwBH,OAAxB,EAAgC;AAC7bI,YAAQD,MAAR,CAAe,OAAf,EACGE,SADH,CACa,YADb,EAC2B;AACvBC,mBAAa,kDADU;AAEvBC,kBAAYC,UAFW;AAGvBC,oBAAc;AAHS,KAD3B;;AAOAD,eAAWE,OAAX,GAAqB,CAAC,cAAD,CAArB;;AAEA,aAASF,UAAT,CAAoBG,YAApB,EAAkC;AAChC,UAAMC,KAAK,IAAX;AACAA,SAAGC,MAAH,GAAY,EAAZ;AACAD,SAAGE,KAAH,GAAW,EAAX;;AAGAF,SAAGG,MAAH,GAAY,UAAUD,KAAV,EAAiBE,IAAjB,EAAuBC,IAAvB,EAA6B;;AAEvC,YAAI,CAACH,KAAL,EAAY;AACVI,gBAAM,qBAAN;AACA;AACD;;AAED;AACA;;AAEAP,qBAAaQ,SAAb,CAAuBL,KAAvB,EAA8BE,IAA9B,EAAoCC,IAApC,EACGG,IADH,CACQ,UAAUC,IAAV,EAAgB;AACpBT,aAAGC,MAAH,GAAYQ,KAAKC,IAAL,CAAUC,MAAtB;AACAC,uBAAaZ,GAAGC,MAAhB;AACD,SAJH;AAKD,OAfD;;AAkBA,eAASW,YAAT,CAAsBC,IAAtB,EAA4B;AAC1BA,aAAKC,OAAL,CAAa,UAAUC,KAAV,EAAiBC,KAAjB,EAAwB;AACnCjB,uBAAakB,YAAb,CAA0BF,MAAMG,MAAhC,EACGV,IADH,CACQ,UAAUC,IAAV,EAAgB;AACpBT,eAAGC,MAAH,CAAUe,KAAV,IAAmBP,KAAKC,IAAxB;AACA;AACD,WAJH;AAKD,SAND;AAOD;;AAED;AACAV,SAAGG,MAAH,CAAU,MAAV,EAnCgC,CAmCb;AACpB;AAEA,GAhD2Z,EAgD1Z,EAhD0Z,CAAH,EAAzZ,EAgDO,EAhDP,EAgDU,CAAC,CAAD,CAhDV","file":"search-page.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nangular.module('myApp')\n  .component('searchPage', {\n    templateUrl: '/scripts/components/search-page/search-page.html',\n    controller: Controller,\n    controllerAs: 'vm'\n  });\n\nController.$inject = ['postsService'];\n\nfunction Controller(postsService) {\n  const vm = this;\n  vm.movies = [];\n  vm.title = '';\n\n\n  vm.search = function (title, year, type) {\n\n    if (!title) {\n      alert('Please, enter title');\n      return;\n    }\n\n    // vm.title = (type === undefined && vm.title !== '') ? vm.title : 'Drama';\n    // vm.title = text || vm.title;\n\n    postsService.getMovies(title, year, type)\n      .then(function (resp) {\n        vm.movies = resp.data.Search;\n        getEachMovie(vm.movies);\n      });\n  };\n\n\n  function getEachMovie(list) {\n    list.forEach(function (movie, index) {\n      postsService.getFullMovie(movie.imdbID)\n        .then(function (resp) {\n          vm.movies[index] = resp.data;\n          // vm.movies[index].isDataLoaded = true;\n        })\n    });\n  }\n\n  // resp.data.Search[0].Poster\n  vm.search('2016'); // todo remove\n}\n\n},{}]},{},[1])"]}