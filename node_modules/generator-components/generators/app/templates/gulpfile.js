var gulp = require('gulp-help')(require('gulp'), {
    description: '帮助信息'
})
var $ = require('gulp-load-plugins')()
var config = require('./webpack.config.js')
var pkg = require('./package.json')

gulp.task('build', '生成', function () {
    return gulp.src('src/**/*.js')
        .pipe($.plumber())
        .pipe($.webpack(config))
        .pipe(gulp.dest('build'))
})

gulp.task('dist', '生成', ['build'], function () {
    return gulp.src('build/**/*.js')
        .pipe($.jshint())
        .pipe($.uglify())
        .pipe($.rename({
            basename: pkg.name + '-min'
        }))
        .pipe(gulp.dest('dist'))
})
